# 最大公约数 gcd

!!! note "[872.最大公约数](https://www.acwing.com/problem/content/874/)"

    给定 $n$ 对正整数 $a_i, b_i$，请你求出每对数的最大公约数。

设 $d$ 是 $a、b$ 的公约数：

> - $d\ |\ a$，$d\ |\ b$
> - $d\ |\ (xa+yb)$

---

**证明 $d\ |\ (xa+yb)$**：

因为 $d\ |\ a$，$d\ |\ b$，所以设 $a = md,\ b = nd$，则 

> $(xa + yb) = (xmd + ynd) = d(xm + yn)$

所以 $d\ |\ (xa+yb)$

---

**证明 $d\ |\ (a\ \%\ b)$**：

1. 若 $a < b$ 则 $(a\ \%\ b) = a$，因为 $d\ |\ a$，$d\ |\ b$，所以 $d\ |\ (a\ \%\ b)$
2. 若 $a \geq b$ 则设 $k = a\ \%\ b$，所以 $a = xb + k$，所以 $k = xb - a$，由于 $d\ |\ (xb - a) = k$，所以 $d\ |\ (a\ \%\ b)$

综上：$d\ |\ (a\ \%\ b)$

---

**若 $a > b$，证明 $(a, b)$ 的公约数集合完全等同于 $(b, a\ \%\ b)$ 的公约数集合**

1. 设 $d$ 能整除 $a$ 和 $b$，设 $k = a\ \%\ b$，则 $k = a - xb$，所以 $d\ |\ k$，所以 $(a, b)$ 的公约数集合在 $(b, a\ \%\ b)$ 的公约数集合里面；
2. 设 $d$ 能整除 $b$ 和 $a\ \%\ b$，设 $k = a\ \%\ b$，则 $d\ |\ k$；且我们有：$a = xb + k$，而 $d\ |\ (xb + k = a)$，所以 $d\ |\ a$；所以 $(b, a\ \%\ b)$ 的公约数集合也在 $(a, b)$ 的公约数集合里面。

综上两点我们有：$(a, b)$ 的公约数集合完全等同于 $(b, a\ \%\ b)$ 的公约数集合

---

设计 `gcd` 代码：

```c++
typedef long long LL;

LL gcd(LL a, LL b)
{
    if (!a || !b) return a | b;
    return a > b ? gcd(b, a % b) : gcd(a, b % a);
}
```